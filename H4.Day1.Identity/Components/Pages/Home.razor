@page "/"
@using Microsoft.AspNetCore.Authorization
@inject AuthenticationStateProvider AuthenticationStateProvider
@attribute [Authorize(Policy = "AuthenticatedUser")]

<PageTitle>Home</PageTitle>

@* <AuthorizeView>
    <Authorized>
        <h1>Hello, world!</h1>

        Welcome to your new app.
    </Authorized>
    <NotAuthorized>
        <div>You are NOT logged in.</div>
    </NotAuthorized>
</AuthorizeView> *@

@if (_isAuthenticated)
{
    <h1>Hello, world!</h1>
    <div>Welcome to your new app. (From code)</div>
}
else
{
    <div>You are NOT logged in. (From Code)</div>
}

@code {
    private bool _isAuthenticated;
    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        _isAuthenticated = user.Identity?.IsAuthenticated ?? false;
    }
}
